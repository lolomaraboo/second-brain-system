#!/bin/bash
# Git hook: sync ~/.claude avant chaque commit dans SecondBrain/
# √Ä installer: ln -sf ../../hooks/pre-commit-claude-sync .git/hooks/pre-commit

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
SECONDBRAIN_DIR="$(cd "$SCRIPT_DIR/.." && pwd)"

echo "üîÑ Sync ~/.claude ‚Üí claude-config/ avant commit..."

"$SECONDBRAIN_DIR/scripts/sync-claude-config.sh" to-backup > /dev/null 2>&1

if [ $? -eq 0 ]; then
    echo "‚úÖ Sync termin√©"
    # Re-add les fichiers modifi√©s par le sync
    git add claude-config/
else
    echo "‚ö†Ô∏è  Sync √©chou√© (non-bloquant)"
fi

exit 0
