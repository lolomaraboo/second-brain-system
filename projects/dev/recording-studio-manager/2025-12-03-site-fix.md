# Site Fix - recording-studio-manager.com

**Date:** 2025-12-03  
**Status:** ✅ Résolu

## Problème

Le domaine `recording-studio-manager.com` affichait le site n8n.io au lieu de l'application Recording Studio Manager.

## Cause

- Aucune configuration Nginx n'existait pour `recording-studio-manager.com`
- Pas de certificat SSL configuré
- Le trafic tombait sur le serveur Nginx par défaut qui servait n8n

## Solution

### 1. Configuration Nginx créée

```bash
/etc/nginx/sites-available/recording-studio-manager
```

Configuration:
- Écoute: 443 (SSL) + 80 (HTTP)
- Backend: `http://localhost:5002` (Gunicorn)
- Redirection automatique HTTP → HTTPS
- Headers de sécurité (CSP, HSTS, X-Frame-Options)

### 2. Certificat SSL

```bash
certbot --nginx -d recording-studio-manager.com -d www.recording-studio-manager.com
```

- Certificat: `/etc/letsencrypt/live/recording-studio-manager.com-0002/`
- Expiration: 2026-03-03
- Auto-renewal: Configuré

### 3. Rechargement Nginx

```bash
kill -HUP 1547789
```

Note: Utilisation de `kill -HUP` car multiples instances Nginx empêchaient `systemctl reload`.

## Infrastructure

- **Serveur:** 31.220.104.244
- **Backend:** Flask/Gunicorn (2 workers, port 5002)
- **Reverse proxy:** Nginx 1.24.0
- **SSL:** Let's Encrypt
- **Répertoire app:** `/app`

## Vérification

✅ `https://recording-studio-manager.com` → Page login  
✅ `http://recording-studio-manager.com` → Redirection HTTPS  
✅ Certificat SSL valide  
✅ Headers sécurité présents  
✅ Rate limiting actif (200 req/h)

## Voir aussi

- [[multi-tenant-provisioning]]
- [[stripe-billing-system]]
